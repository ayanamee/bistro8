pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
scale = 4
rs = 128/scale - 1
cs = rs

sim = 0
aux = 0

x=0
y=0

function _init()
	palt(0, true)
	mt = {}
	for i=0,rs do
		mt[i] = {}
		for j=0,cs do
			rd = (flr(rnd(3)))%2
			mt[i][j] = {current = 0, nextc = 0}
		end
	end
end

function _update60()

	if(sim==0) then
		move_cursor()
		if btnp(5) then
			a=x/scale
			b=y/scale
			if(mt[a][b].current == 1)then
				mt[a][b].current = 0
			else
				mt[a][b].current = 1
			end
		end
	end
	
	if btnp(4) then
		if (sim==1) then
			sim=0
		elseif (sim==0) then
			sim=1
		end
	end
	
	aux+=1
end

function _draw()
	cls()

	if(sim==1) then
		for i=0,rs do
			for j=0,cs do
				check_cell(i,j)
			end
		end
		
		for i=0,rs do
			for j=0,cs do
				mt[i][j].current = mt[i][j].nextc
			end
		end 
	end

	for i=0,rs do
		for j=0,cs do
			if(mt[i][j].current == 1) then
				rectfill(
				i*scale,
				j*scale,
				scale*(i+scale),
			 scale*(j+scale),
				13)
			elseif(mt[i][j].current ==0) then
				rectfill(
				i*scale,
				j*scale,
			 scale*(i+scale),
			 scale*(j+scale),
				1)
			end
		end
	end
	
	if(sim==0) then
		rectfill(
		x,
		y,
		(x+scale-1),
		(y+scale-1),
		13)
	end
	

end


function check_cell(i,j)

	alive = 0
	
	for u=0, 2 do
		for v=0, 2 do
			r=(i+u-1+rs)%(rs)
			c=(j+v-1+cs)%(cs)
			if(u==1 and v==1) then goto	continue end
			if(mt[r][c].current==1)then
				alive +=1
			end
			::continue::
		end
	end
		
	if(mt[i][j].current == 1) then
		if(alive<2) then
			mt[i][j].nextc = 0
		elseif(alive==2 or alive==3) then
			mt[i][j].nextc = 1
		elseif(alive>3) then
			mt[i][j].nextc = 0
		end
	elseif(mt[i][j].current == 0) then
		if(alive==3) then
			mt[i][j].nextc = 1
		end
	end
end
				
	
function move_cursor()
	
	if btnp(⬆️) then
		y = y-scale
	elseif btnp(⬇️) then
		y = y+scale
	elseif btnp(➡️) then
		x = x+scale
	elseif btnp(⬅️) then
		x = x-scale
	end
	
	x=x%128
	y=y%128
	
end


		
	
__gfx__
000000000cccccc03333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ce1ee1ec3333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700ce1ee1ec3333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000c1eeee1c3333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000c111111c3333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000cccccc03333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000c0000c03333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ccc00ccc3333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111dddddddddddd1111dddddddddddd1111dddddddddddddddd11111111dddddddd111111111111111111111111dddd1111111111111111
11111111111111111111dddddddddddd1111dddddddddddd1111dddddddddddddddd11111111dddddddd111111111111111111111111dddd1111111111111111
11111111111111111111dddddddddddd1111dddddddddddd1111dddddddddddddddd11111111dddddddd111111111111111111111111dddd1111111111111111
11111111111111111111dddddddddddd1111dddddddddddd1111dddddddddddddddd11111111dddddddd111111111111111111111111dddd1111111111111111
11111111111111111111dddd111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd11111111111111111111dddd1111dddd1111111111111111
11111111111111111111dddd111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd11111111111111111111dddd1111dddd1111111111111111
11111111111111111111dddd111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd11111111111111111111dddd1111dddd1111111111111111
11111111111111111111dddd111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd11111111111111111111dddd1111dddd1111111111111111
11111111111111111111dddd111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111dddddddd1111111111111111
11111111111111111111dddd111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111dddddddd1111111111111111
11111111111111111111dddd111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111dddddddd1111111111111111
11111111111111111111dddd111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111dddddddd1111111111111111
11111111111111111111dddd1111dddd1111dddddddddddd1111dddd1111dddd1111dddd1111dddddddd111111111111111111111111111111111111dddd1111
11111111111111111111dddd1111dddd1111dddddddddddd1111dddd1111dddd1111dddd1111dddddddd111111111111111111111111111111111111dddd1111
11111111111111111111dddd1111dddd1111dddddddddddd1111dddd1111dddd1111dddd1111dddddddd111111111111111111111111111111111111dddd1111
11111111111111111111dddd1111dddd1111dddddddddddd1111dddd1111dddd1111dddd1111dddddddd111111111111111111111111111111111111dddd1111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd11111111111111111111111111111111dddd1111dddd1111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd11111111111111111111111111111111dddd1111dddd1111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd11111111111111111111111111111111dddd1111dddd1111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd11111111111111111111111111111111dddd1111dddd1111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111111111111111dddddddd1111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111111111111111dddddddd1111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111111111111111dddddddd1111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111111111111111dddddddd1111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111
11111111111111111111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111
11111111111111111111dddddddddddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddddddd111111111111111111111111dddd1111111111111111
11111111111111111111dddddddddddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddddddd111111111111111111111111dddd1111111111111111
11111111111111111111dddddddddddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddddddd111111111111111111111111dddd1111111111111111
11111111111111111111dddddddddddd1111dddd1111dddd1111dddd1111dddd1111dddd1111dddddddd111111111111111111111111dddd1111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dddd1111dddd1111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dddd1111dddd1111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dddd1111dddd1111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dddd1111dddd1111111111111111
111111111111111111111111111111111111dddddddddddd1111dddddddd11111111111111111111111111111111111111111111dddddddd1111111111111111
111111111111111111111111111111111111dddddddddddd1111dddddddd11111111111111111111111111111111111111111111dddddddd1111111111111111
111111111111111111111111111111111111dddddddddddd1111dddddddd11111111111111111111111111111111111111111111dddddddd1111111111111111
111111111111111111111111111111111111dddddddddddd1111dddddddd11111111111111111111111111111111111111111111dddddddd1111111111111111
111111111111111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111dddd1111dddd1111dddddddd11111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111dddd1111dddd1111dddddddd11111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111dddd1111dddd1111dddddddd11111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111dddd1111dddd1111dddddddd11111111111111111111111111111111111111111111111111111111111111111111
11111111dddd111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
11111111dddd111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
11111111dddd111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
11111111dddd111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
dddd1111dddd111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
dddd1111dddd111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
dddd1111dddd111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
dddd1111dddd111111111111111111111111dddd1111dddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
1111dddddddd111111111111111111111111dddddddddddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
1111dddddddd111111111111111111111111dddddddddddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
1111dddddddd111111111111111111111111dddddddddddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
1111dddddddd111111111111111111111111dddddddddddd1111dddd111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111dddd111111111111111111111111dddd11111111dddd1111dddddddd1111dddddddd111111111111111111111111111111111111
111111111111111111111111dddd111111111111111111111111dddd11111111dddd1111dddddddd1111dddddddd111111111111111111111111111111111111
111111111111111111111111dddd111111111111111111111111dddd11111111dddd1111dddddddd1111dddddddd111111111111111111111111111111111111
111111111111111111111111dddd111111111111111111111111dddd11111111dddd1111dddddddd1111dddddddd111111111111111111111111111111111111
1111111111111111dddd1111dddd111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
1111111111111111dddd1111dddd111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
1111111111111111dddd1111dddd111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
1111111111111111dddd1111dddd111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
11111111111111111111dddddddd111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
11111111111111111111dddddddd111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
11111111111111111111dddddddd111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
11111111111111111111dddddddd111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111dddd11111111dddd1111dddddddd1111dddddddd111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111dddd11111111dddd1111dddddddd1111dddddddd111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111dddd11111111dddd1111dddddddd1111dddddddd111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111dddd11111111dddd1111dddddddd1111dddddddd111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
11111111111111111111dddd1111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
11111111111111111111dddd1111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
11111111111111111111dddd1111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
11111111111111111111dddd1111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
111111111111dddd1111dddd1111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
111111111111dddd1111dddd1111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
111111111111dddd1111dddd1111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
111111111111dddd1111dddd1111111111111111111111111111dddd11111111dddd1111dddd11111111dddd1111111111111111111111111111111111111111
1111111111111111dddddddd1111111111111111111111111111dddddddd1111dddd1111dddd11111111dddddddd111111111111111111111111111111111111
1111111111111111dddddddd1111111111111111111111111111dddddddd1111dddd1111dddd11111111dddddddd111111111111111111111111111111111111
1111111111111111dddddddd1111111111111111111111111111dddddddd1111dddd1111dddd11111111dddddddd111111111111111111111111111111111111
1111111111111111dddddddd1111111111111111111111111111dddddddd1111dddd1111dddd11111111dddddddd111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111

